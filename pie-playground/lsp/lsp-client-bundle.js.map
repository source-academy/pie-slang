{"version":3,"file":"lsp-client-bundle.js","sources":["lsp-client-simple.ts"],"sourcesContent":[null],"names":["PieLanguageClient","constructor","monacoInstance","editorInstance","this","worker","disposables","debouncedValidate","debouncedContextInfo","diagnostics","contextInfoCallback","monaco","editor","setContextInfoCallback","callback","start","Worker","onmessage","event","handleWorkerMessage","data","onerror","error","console","model","getModel","debounce","source","getValue","postMessage","type","requestContextInfo","changeDisposable","onDidChangeModelContent","push","cursorDisposable","onDidChangeCursorPosition","hoverDisposable","languages","registerHoverProvider","provideHover","position","completionDisposable","registerCompletionItemProvider","provideCompletionItems","definitionDisposable","registerDefinitionProvider","provideDefinition","stop","clearMarkers","forEach","disposable","dispose","terminate","isRunning","message","updateDiagnostics","severity","startLine","startColumn","endLine","endColumn","contextLines","inTacticalProof","proofInfo","getPosition","line","lineNumber","column","markers","map","diag","ensurePositiveNumber","startLineNumber","endLineNumber","MarkerSeverity","Warning","Error","setModelMarkers","diagnostic","find","contents","value","range","Promise","resolve","handleHover","removeEventListener","hoverInfo","info","markdownContent","title","summary","details","examples","addEventListener","setTimeout","handleCompletion","wordRange","end","suggestions","completions","item","kind","CompletionItemKind","Text","Keyword","Function","Variable","Class","Value","Snippet","label","detail","insertText","handleDefinition","location","uri","fallback","Number","isNaN","fn","delay","handle","window","clearTimeout","pruneSpaces","replace","format","src","lines","split","prevEmpty","cleanedLines","trimmed","trim","indentLevel","flatMap","openParens","match","length","closeParens","indentedLine","repeat","join","registerPieLanguage","register","id","setLanguageConfiguration","comments","lineComment","blockComment","brackets","autoClosingPairs","open","close","surroundingPairs","indentationRules","increaseIndentPattern","decreaseIndentPattern","onEnterRules","beforeText","action","indentAction","IndentAction","Indent","afterText","IndentOutdent","Outdent","registerDocumentFormattingEditProvider","provideDocumentFormattingEdits","getFullModelRange","text","registerDocumentRangeFormattingEditProvider","provideDocumentRangeFormattingEdits","getValueInRange","setMonarchTokensProvider","defaultToken","tokenPostfix","keywords","operators","symbols","tokenizer","root","include","cases","whitespace","comment","string"],"mappings":"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"}